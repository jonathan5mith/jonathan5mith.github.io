
<!-- CSS -->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kick &middot; profile</title>

    <script src="js/bootstrap.min.js"></script>
    <script src='../js/Chart.js'></script>
    <script src="//www.parsecdn.com/js/parse-1.3.4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
 
<!-- Favs --> 
<!--==============================================-->

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="img/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="img/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="img/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="img/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="img/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="&nbsp;"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="img/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="img/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="img/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="img/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="img/mstile-310x310.png" />



<!-- CSS -->
<!--==============================================-->
    
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/kick.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

<!-- Google Fonts -->
<!--==============================================-->

<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Berkshire+Swash' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Londrina+Solid' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Karla' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,500,700,900|Merriweather' rel='stylesheet' type='text/css'>


<!-- Font Awesome -->
<!--==============================================-->

<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  </head>



<!-- Body begins -->
<!--==============================================-->

  <body>
    
<!-- Navbar -->
<!--==============================================-->

<nav class="navbar navbar-default navbar-fixed-top" role="navigation" data-options="scrolltop: false">
<div class="container">
<div class="navbar-header">
  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
    <span class="sr-only">Toggle navigation</span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="navbar-brand" href="index.html"> <img src="https://dl.dropboxusercontent.com/u/10455351/Assets/kick%20white%20small2.png"/></a>
</div>
<div id="navbar" class="collapse navbar-collapse">
  <ul class="nav navbar-nav navbar-right">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Do stuff<span class="caret"></span></a>
      <ul class="dropdown-menu" role="menu">
        <li><a href="http://runwithkick.com/getstarted" style="font-weight:600">Get Started</a></li>
        <li><a href="http://runwithkick.com/gotoprofile">Go to a Profile</a></li>
        <li><a href="http://runwithkick.com/create">Create a Kick</a></li>
        <li><a href="http://runwithkick.com/explore">Explore Kicks</a></li>
        <li><a href="http://runwithkick.com/submit">Submit a Time</a></li>

        <li><a href="http://runwithkick.com/steel">Events</a></li>
      </ul>
    </li>
    <li><a href="http://runwithkick.com/howitworks">How it Works</a></li>
    <li><a href="http://runwithkick.com/about">About</a></li>
    <li><a href="http://blog.runwithkick.com">Blog</a></li>
    <li><a href="https://www.strava.com/clubs/kick-122494" target="_blank" title="Strava"><img src="https://dl.dropboxusercontent.com/u/10455351/Assets/strava1.png"/></a></li>
    <li><a href="http://www.twitter.com/runwithkick" target="_blank" title="Twitter"><i class="fa fa-twitter social-icons"></i></a></li>
    <li><a href="https://www.facebook.com/runwithkick" target="_blank" title="Facebook"><i class="fa fa-facebook social-icons"></i></a></li>
    <!--<li><a href="https://www.instagram.com/jonathan5mith" target="_blank" title="Instagram"><i class="fa fa-instagram social-icons"></i></a></li>-->

  </ul>
</div><!--/.nav-collapse -->
</div>
</nav>

<!-- Sub navbar - picture, text container & text-->
<!--==============================================-->
  
<div class="sub-navbar2">

</div>

<!-- Main page content-->
<!--==============================================-->

<div class="maincontain">


<!-- Profile Image-->


  <div id="container">
     <span id="twitterpicture"></span>
  </div>

<!-- Profile Name-->

  <div id="profile-name">

    <p class="mainheaders"><span id="name"></span></p>
    <p class="subheaders1"><span id="location"></span><span id="validateduser"></span></p>
        <span id="message"></span>

    <!--<p class="subheaders">
      <form class="navbar-form navbar-center" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="New profile">
        </div>
        <button type="submit" class="btn btn-default">Go!</button>
      </form>
    </p>-->

</div>

<div id="removeall">






<!-- Columns-->

  <div class="row coltext">
    
<!-- Column 1-->

  <div class="col-md-4">
    <div class="cards">
      <div class="border-bottom">
        <p class="mainheaders">Stats</p>
      </div>

      <div class="border-below">
      <span id="statsreplace"></span>
      <div id="statsremove">
    
      <table>
        
        <tr>
          <td><p id="stats"><span>Points</span></td> <td><span id="points" ></span></p></td>
        </tr>

        <tr>
          <td><p id="stats"><span>Total Kicks</span></td>  <td><span id="totalkicks"></span></p></td>
        </tr>

        <tr>
          <td><p id="stats"><span>Best Kick</span></td> <td><span id="PB"></span></p></td>
        </tr>
      </table>

      <span id="graphtocome"></span>

      <div id="canvasremove">
      <div id="greyline"></div>

      <table id="marginbetweentables">
        <tr>
          <td><p id="stats"><span>Last 5 Kicks</span></p></td><td></td>
        </tr>
      </table>
      
       
      <canvas id="buyers" width="400" height="200"></canvas>
          </div>
    </div>
    </div>
    </div>
<!--
<div id="cardremove">
    <div class="cards twoinrow">
      <div class="border-bottom">
        <p class="mainheaders" id="removeimage"><span id="uploadheader"></span><span id="thanks"></span></p>
      </div>
      
      <div class="border-below">
        
        <div id="formremove">
          
          <div class="form-group">
            <label>Enter Kick ID</label>
            <input type="email" class="form-control" id="uniqueid" placeholder="Kick ID">
          </div>
          

        <div class="form-group">
          <p style="font-weight:400;">Your 5k time</p>

          <div class="col-xs-6 nopadding">
              <input type="text" class="form-control" placeholder="mm" id="mm"/>
          </div>
          <div class="col-xs-6 nopadding">
              <input type="text" class="form-control" placeholder="ss" id="ss"/>
          </div>    
        </div>

        <p style="line-height: 40px;">
          <button type="submit" id="submit" onclick="formSubmit();" class="btn btn-default">Go!</button>
        </p>


        </div>

         <span id="formconfirm"></span>


      </div>
    </div>
    </div>
-->

  </div>

<!-- Column 2-->

  <div class="col-md-4 ">
 
      <div class="cards">
        <div class="border-bottom">
          <p class="mainheaders">Vests</p>
        </div>
        
        <div class="border-below bottomlinkpadding">
                 
      

      
        <table>
          <tr>
            <td id="tablefix">
              <span id="vest1"></span>
            </td>
            <td>
              Kick
            </td>
          </tr>
        </table>
        <div id="greyline1"></div>
        <table>
          <tr>
            <td id="tablefix">
              <span id="vest2"></span>
            </td>
            <td>
              Helsinki
            </td>
          </tr>
          <tr>
            <td id="tablefix">
              <span id="vest3"></span>
            </td>
            <td>
              Tokyo
            </td>
          </tr>

          <tr>
            <td id="tablefix">
              <span id="vest4"></span>
            </td>
            <td>
              Rome
            </td>
          </tr>

          <tr>
            <td id="tablefix">
              <span id="vest5"></span>
            </td>
            <td>
              Los Angeles
            </td>
          </tr>

          <tr>
            <td id="tablefix">
              <span id="vest6"></span>
            </td>
            <td>
              London
            </td>
          </tr>    

          </table>

  
          <div id="spacer">
            <p class="subheaders1 bottomlink"> <a href="http://runwithkick.com/vests">Vests </a><i class="fa fa-angle-right"></i></p>    
          </div>
        </div>  
      </div>

 <!-- Card 2-->


  </div>

  <!-- Column 3-->
 

 <div class="col-md-4">


  <!-- Card 2-->
      
      <div class="cards">
        <div class="border-bottom">
          <p class="mainheaders">Last race</p>
        </div>
      
        <div class="border-below">
          <table>
          <tr>
            <td>
              <p><span id="lastrace"></span></p>
            </td>
          </table>

        </div>
      </div>

    <!-- Card 3-->

      <div class="cards twoinrow">
        <div class="border-bottom">
          <p class="mainheaders">Find other runners</p>
        </div>
      
        <div class="border-below">

          <p>Enter a twitter handle to navigate to other users:</p>
          <div class="form-inline profileform" role="form">
            <div class="input-group">
              <input type="text" class="form-control"  id="twitterhandleprofile" placeholder="e.g. @runwithkick" style="width:180px;margin-right:10px">
              <button type="submit" class="btn btn-default" onclick="formSubmit1();">Go!</button>
            </div>
          </div>

                   <span id="formconfirmfind"></span>



        </div>

        </div>
      </div>


    </div>

</div>
</div>
</div>




<!-- Bottom Navbar-->
<!--==============================================-->


<div class="bottomnav">

<div class="bottombar">
    <div class="row coltext">
      <div class="col-sm-1">
      </div>
      <div class="col-sm-2 col-xs-6">
        <h2 id="getstarted"><a href="http://www.runwithkick.com/howitworks">How it Works</a></h2>
      </div>
      <div class="col-sm-2 col-xs-6">
        <h2 id="getstarted"><a href="http://www.runwithkick.com/create">Create a Kick</a></h2>
      </div>
      <div class="col-sm-2 col-xs-6">
        <h2 id="getstarted"><a href="http://www.runwithkick.com/explore">Find a Kick</a></h2>
      </div>
      <div class="col-sm-2 col-xs-6">
        <h2 id="getstarted"><a href="http://www.runwithkick.com/submit">Submit a Time</a></h2>
      </div>
            <div class="col-sm-2 col-xs-6">
        <h2 id="getstarted"><a href="http://www.runwithkick.com/steel">Events</a></h2>
      </div>
            <div class="col-sm-1">
      </div>
    </div>

</div>
    <!--<p style="padding-top:10px; padding-bottom:0px; text-align:center">Â© 2015 Jonathan Smith</p>-->

</div>


<!-- Javascript Stuff-->
<!--==============================================-->



<!--Bootstrap-->

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>


<!-- Parse-->
<!--==============================================-->
  
<script type="text/javascript">

function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}

var person1 = getQueryVariable("id");
var person = person1.toLowerCase();



// Initialisation
Parse.initialize("ImFHWsA4AQ8lDUSfaDlsokY2C6ld3e12bDtfecJ0", "7FynBYH2bC7k3NCvGoKtFsyNw0aTytfvtFo0H2Ei");
// Defining class
//var url = window.location.pathname;
//var person1 = url.substring(url.lastIndexOf('/')+1);
//var person1 = prompt("Please enter your handle");
//var person = person1.toLowerCase();



var personalInfo = Parse.Object.extend("upload1");

// -----------------Name query
var queryName = new Parse.Query(personalInfo);
queryName.equalTo("TwitterHandle", person);
queryName.first({
  success: function(object) {
    var firstname = object.get('firstName');
    var lastname = object.get('lastName');
    var nonRunner = object.get('nonRunner');
    document.getElementById("lastrace").innerHTML = firstname+"'s results from their last race will appear here after they have raced for the first time";
    document.getElementById("name").innerHTML = firstname+" "+lastname;
    document.getElementById("visitkicks").innerHTML = "<a href='http://www.runwithkick.com/kicks?id="+person+"'>"+firstname+"'s Kicks <i class='fa fa-angle-right'></i></a>"
    if (nonRunner == true){
      var elem = document.getElementById("removeall");
      elem.parentNode.removeChild(elem);
      if (person=="runwithkick"){
        document.getElementById("message").innerHTML = "<br><p class='subheaders1'>Kick doesn't actually do any running, but you can check out <a href='http://www.runwithkick.com/profile?id=jonathan5mith'>Jon's Profile</a></p>";
      }
    }

  },
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
);
// -----------------Location
var queryLocation = new Parse.Query(personalInfo);
queryLocation.equalTo("TwitterHandle", person);
queryLocation.first({
  success: function(object) {
    var city = object.get('city');
    var country = object.get('country');
    document.getElementById("location").innerHTML = city+", "+country+" ";
  },
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
);
// -----------------Validated query
var queryValidated = new Parse.Query(personalInfo);
queryValidated.equalTo("TwitterHandle", person);
queryValidated.first({
  success: function(object) {
    var validated = object.get('validatedLink');
    if (validated.length>0) {
      document.getElementById("validateduser").innerHTML = '<i title="Validated User" class="fa fa-check-circle"></i>';
    }
    else {
      document.getElementById("validateduser").innerHTML = '';
    }
  },
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
  
);
// -----------------Points query
var queryPoints = new Parse.Query(personalInfo);
queryPoints.equalTo("TwitterHandle", person);
queryPoints.first({
  success: function(object) {
    var points = object.get('points');  
    document.getElementById("points").innerHTML = points;
  },
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
});
// -----------------Profile image
var queryPic = new Parse.Query(personalInfo);
queryPic.equalTo("TwitterHandle", person);
queryPic.first({
  success: function(object) {
    var twitterpic = object.get('TwitterHandle');
    document.getElementById("twitterpicture").innerHTML = '<div id="inner" style="background-image: url(https://twitter.com/'+twitterpic+'/profile_image?size=original)"></div>';
  }, 
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
);
// -----------------Times
//api
var queryTimes = new Parse.Query(personalInfo);
queryTimes.equalTo("TwitterHandle", person);
queryTimes.first({
  success:function(object) {
        
    var times = object.get('runTimes');
    var runtimes= times.slice(-5);
    
    //defining the conversion formula
    function minTommss(minutes){
      var sign = minutes < 0 ? "-" : "";
      var min = Math.floor(Math.abs(minutes))
      var sec = Math.floor((Math.abs(minutes) * 60) % 60);
      return sign + (min < 10 ? "0" : "") + min + ":" + (sec < 10 ? "0" : "") + sec;
    };
    //defining runtimesformatted variable 
    var runtimesformatted = [];
    
    //loop over variable
    for (var i = 0; i < runtimes.length; i++) {
    runtimesformatted[i] = minTommss(runtimes[i]);
    };
    //defining runtimesformatted variable 
    
    var PBa = Math.min.apply(Math, times); 
    var PB = minTommss(PBa);
    
    document.getElementById("PB").innerHTML = PB;
    //creating chart
    var buyerData = {
    labels : runtimesformatted,
    datasets : [
      {
      strokeColor : "rgba(150,150,150,.5)",
      pointColor : "#FFF",
      pointStrokeColor : "rgba(100,100,100,.9)",
      pointHighlightFill: "rgba(100,100,100,1)",
      pointHighlightStroke: "rgba(100,100,100,.9)",
      data : runtimes,
      }
  ]
}
    var buyers = document.getElementById('buyers').getContext('2d');
    buyers.canvas.width = 240;
    buyers.canvas.height = 160;
    new Chart(buyers).Line(buyerData,{
      scaleShowGridLines : false,
      scaleFontColor:"rgba(100,100,100,0)",
      scaleLineColor: "rgba(100,100,100,0)",
      tooltipTemplate: "<%= label %>",
      tooltipFillColor: "rgba(100,100,100,0.8)",
      tooltipFontSize: 11,
      tooltipCornerRadius: 3,
      pointDotRadius : 6,
      tooltipFontFamily: "'Lato', sans-serif",
      animation:false,
      pointHighlightFill: "white"
        
    });
    },
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  },
});
// -----------------Vests
var queryVests = new Parse.Query(personalInfo);
queryVests.equalTo("TwitterHandle", person);
queryVests.first({
  
  success: function(object) {
            var vests = object.get('points');
            var times = object.get('runTimes');
            var firstname = object.get('firstName')
            var imgtag = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/';

            //lots of horrible if statements - need to work out why for loop isn't working with Parse
                                 

            if(vests>=5){
              document.getElementById("vest1").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest1.png" height="85">'
            }

            else{
              document.getElementById("vest1").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank.png "height="85">'
            };

            
            if(vests>=20){
              document.getElementById("vest2").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest2.png" height="85">'
            }
            else{
              document.getElementById("vest2").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank20.png" height="85">'
            }
            if(vests>=40){
              document.getElementById("vest3").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest3.png" height="85">'
            }
            else{
              document.getElementById("vest3").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank40.png" height="85">'
            }
            if(vests>=60){
              document.getElementById("vest4").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest4.png" height="85">'
            }
            else{
              document.getElementById("vest4").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank60.png" height="85">'
            }
            if(vests>=80){
              document.getElementById("vest5").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest5.png" height="85">'
            }
            else{
              document.getElementById("vest5").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank80.png" height="85">'
            }
            
            if(vests>=100){
              document.getElementById("vest6").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/vest6.png" height="85">'
            }
            else{
              document.getElementById("vest6").innerHTML = '<img src="https://dl.dropboxusercontent.com/u/10455351/Assets/blank100.png" height="85">'
            }

            if(times.length>0){
              document.getElementById("totalkicks").innerHTML = times.length;
            }


            if(times.length==0){
              var elem = document.getElementById("statsremove");
              elem.parentNode.removeChild(elem);
              document.getElementById("statsreplace").innerHTML = '<p>'+firstname+' hasnt entered any times yet, as soon as they <a href="http://www.runwithkick.com/submit" target="_blank">upload their first Kick</a>, thier stats will appear here and they will recieive their first vest!</p>'
              document.getElementById("uploadheader").innerHTML =  "Send first Kick"
            }


            if(times.length==1){
              var elem = document.getElementById("canvasremove");
              elem.parentNode.removeChild(elem);
              document.getElementById("graphtocome").innerHTML = "<div id='greyline'></div><br><p>"+firstname+" has entered their first time and recieved 5 points and their first vest. When "+firstname+" starts racing, a graph showing up to their last 5 results will appear here.</p>";
              document.getElementById("uploadheader").innerHTML =  "Send Kick"
            }
    },
    
  }
);

//Kicks Entered

var queryKicksEntered = new Parse.Query(personalInfo);
queryKicksEntered.equalTo("TwitterHandle", person);
queryKicksEntered.first({
  success: function(object) {
    var kickentered = object.get('kickEntered');
    var firstname = object.get('firstName');

    if(kickentered.length>0){
      
      for(i=0;i<kickentered.length;i++){
        var j = i.toString();
        document.getElementById("formconfirm"+j).innerHTML = "<table><tr><td><div id='minipic'style='background-image: url(https://twitter.com/"+kickentered[i]+"/profile_image?size=original)'></div></td><td><a href='http://www.runwithkick.com/kicks?id="+kickentered[i]+"'>"+kickentered[i]+"</a></td></tr></table><br>";
        }
   
    }

    else{
      document.getElementById("formconfirmb").innerHTML = firstname+" hasn't entered any Kicks yet this week.";
      var elem = document.getElementById("removegreyline");
      elem.parentNode.removeChild(elem);
    }
  }, 
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
);

// Check if Registered


var queryExplore = new Parse.Query(personalInfo);
queryExplore.equalTo("kickId", "123A");
queryExplore.first({
  success: function(object) {
    var ifregistered = object.get('kickEntered');
    
      if(ifregistered.indexOf(person)==-1){
      var elem = document.getElementById("removeall");
      elem.parentNode.removeChild(elem);
      document.getElementById("message").innerHTML = "<p class='subheaders' style='padding-bottom:40px'>It looks like there isn't anyone signed up with this username.</p><br><a href='http://www.runwithkick.com/getstarted'><img src='https://dl.dropboxusercontent.com/u/10455351/Assets/signupforkick.png' /img style='height:150px'></a></p>";
      document.getElementById("twitterpicture").innerHTML = '<div id="inner" style="background-image: url(https://dl.dropboxusercontent.com/u/10455351/Assets/hmm.png)"></div>';

      }

    }, 
  error: function(error) {
    alert("It looks like something's gone wrong. It's probably a server thing, but contact jon@runwithkick.com if the problem persists");
  }
  }
);


// Timesubmit
function formSubmit() {
var uniqueid = document.getElementById("uniqueid").value;
var mma = document.getElementById("mm").value;
var ssa = document.getElementById("ss").value;
var mm = parseFloat(mma);
var ss = parseFloat(ssa);
var dectime = mm+(ss/60);
var runtimes = [dectime];
var querySubmitTime = new Parse.Query(personalInfo);

querySubmitTime.equalTo("kickId", uniqueid);
querySubmitTime.first({
  success: function(object) {
    
    var dog = object.get("runTimes");
    var cat = object.get("runTimesHidden");

    if (dog.length==0){
    object.addUnique("runTimes", dectime);
    object.set("points",5);
    object.save();
    document.getElementById("formconfirm").innerHTML = "<p>Fantastic, you've submitted your first Kick!</p> <p>Refresh the page and you should see your time, 5 points and your first vest appear!</p><p>Why not <a href='http://www.runwithkick.com/explore'>explore</a> some Kicks and enter your first race</p>";
    var elem = document.getElementById("formremove");
    elem.parentNode.removeChild(elem);
    var elem = document.getElementById("removeimage");
    elem.parentNode.removeChild(elem);
    document.getElementById("thanks").innerHTML = '...and rest';
    }

    else if (cat.length!==0){
      document.getElementById("formconfirm").innerHTML = "<p>:-/ It looks like you've already submitted a Kick this week, get in touch at jon@runwithkick.com if you think something's up</p>";
    var elem = document.getElementById("formremove");
    elem.parentNode.removeChild(elem);
    var elem = document.getElementById("removeimage");
    elem.parentNode.removeChild(elem);
    }
    
    else{
    object.addUnique("runTimesHidden", dectime);
    object.save();
    document.getElementById("formconfirmfind").innerHTML = "<p>Fantastic, you've submitted your Kick</p> <p>Your time will appear on your profile when the Kick finishes and we'll also tweet you your result!</p>";
    var elem = document.getElementById("formremove");
    elem.parentNode.removeChild(elem);
    var elem = document.getElementById("removeimage");
    elem.parentNode.removeChild(elem);
    document.getElementById("thanks").innerHTML = '...and rest';
    }
   
  },
  error: function(error) { 
    alert("It looks like that's not worked. Check your Kick ID, and if there's still a problem, get in touch at jon@runwithkick.com");
          }
});
};

function formSubmit1() {

var twitterhandle1 = document.getElementById("twitterhandleprofile").value;
var twitterhandle2 = twitterhandle1.split("@").pop();
var twitterhandle = twitterhandle2.toLowerCase();
if(twitterhandle.length==0){
 document.getElementById("formconfirmfind").innerHTML = "<br><p style='color:#990000; text-align:center'>Please enter something</p>"
}
else{
window.location.replace("http://runwithkick.com/profile?id="+twitterhandle);
}
}

</script>



</script>

<!--Browser Warning.js-->
<!--==============================================-->

<script> 
var $buoop = {c:2}; 
function $buo_f(){ 
 var e = document.createElement("script"); 
 e.src = "//browser-update.org/update.js"; 
 document.body.appendChild(e);
};
try {document.addEventListener("DOMContentLoaded", $buo_f,false)}
catch(e){window.attachEvent("onload", $buo_f)}
</script> 
  


</body>
</html>

  </body>
</html>
